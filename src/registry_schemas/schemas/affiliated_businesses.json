{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://bcrs.gov.bc.ca/.well_known/schemas/affiliated_businesses",
  "title": "Affiliated Businesses Schema",
  "definitions": {
    "identifier": {
      "type": "string",
      "title": "The Identifier Schema",
      "default": "",
      "examples": ["CP1234567", "TOiakmfuF2"],
      "pattern": "^[A-Z]{1,3}[0-9]{7}|T[A-Za-z0-9]{9}$"
    },
    "legalType": {
      "type": "string",
      "title": "The Legal Type of the business.",
      "default": "BC",
      "enum": [
        "A",
        "B",
        "BC",
        "BEN",
        "C",
        "CC",
        "CCC",
        "CEM",
        "CP",
        "CS",
        "CUL",
        "EPR",
        "FI",
        "FOR",
        "GP",
        "LIC",
        "LIB",
        "LL",
        "LLC",
        "LP",
        "MF",
        "PA",
        "PAR",
        "PFS",
        "QA",
        "QB",
        "QC",
        "QD",
        "QE",
        "REG",
        "RLY",
        "S",
        "SB",
        "SP",
        "T",
        "TMY",
        "ULC",
        "UQA",
        "UQB",
        "UQC",
        "UQD",
        "UQE",
        "XCP",
        "XL",
        "XP",
        "XS"
      ]
    },
    "nrNumber": {
      "type": "string",
      "maxLength": 10,
      "examples": [
        "NR 1234567"
      ]
    }
  },
  "required": [
    "businessAffiliations",
    "draftAffiliations"
  ],
  "type": "object",
  "properties": {
    "businessAffiliations": {
      "type": "array",
      "items": { "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/business#/properties/business" }
    },
    "draftAffiliations": {
      "type": "array",
      "items": {
        "required": ["identifier"],
        "properties": {
          "identifier": { "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/business#/definitions/identifier" },
          "legalType": { "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/business#/definitions/legalType" },
          "nrNumber": { "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/name_request#/definitions/nrNumber" }
        }
      }
    }
  }
}
